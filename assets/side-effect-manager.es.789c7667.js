const h="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=h.length,d=Array(20),o=()=>{for(let n=0;n<20;n++)d[n]=h.charAt(Math.random()*a);return d.join("")};class c{constructor(){this.disposers=new Map}add(t,e=o()){return this.flush(e),this.disposers.set(e,t()),e}addDisposer(t,e=o()){return this.flush(e),this.disposers.set(e,t),e}addEventListener(t,e,r,s,i=o()){return this.add(()=>(t.addEventListener(e,r,s),()=>t.removeEventListener(e,r,s)),i),i}setTimeout(t,e,r=o()){return this.add(()=>{const s=window.setTimeout(()=>{this.remove(r),t()},e);return()=>window.clearTimeout(s)},r)}setInterval(t,e,r=o()){return this.add(()=>{const s=window.setInterval(t,e);return()=>window.clearInterval(s)},r)}remove(t){const e=this.disposers.get(t);return this.disposers.delete(t),e}flush(t){const e=this.remove(t);if(e)try{e()}catch(r){console.error(r)}}flushAll(){this.disposers.forEach(t=>{try{t()}catch(e){console.error(e)}}),this.disposers.clear()}}export{c as o};
