import{S,i as B,s as U,e as m,t as x,a as _,b as l,c as w,d as L,f as C,g as u,h as R,l as y,j as q,n as v,k as E,r as j,m as z}from"./index.a45d679b.js";import"./modulepreload-polyfill.b7f2da20.js";function A(e){let t,s,o,a,d,r,g,c,b,n,p,h,k;return{c(){t=m("div"),s=m("div"),o=m("span"),a=x(e[2]),d=_(),r=m("input"),g=_(),c=m("button"),c.textContent="GO",b=_(),n=m("iframe"),l(o,"class","netless-app-browser-status"),w(o,"loading",e[2]==="Loading"),w(o,"ready",e[2]==="Ready"),l(r,"class","netless-app-browser-url"),l(r,"autocomplete","off"),l(r,"spellcheck","false"),l(c,"class","netless-app-browser-go"),l(s,"class","netless-app-browser-omnibox"),l(n,"title","Netless App Browser"),l(n,"class","netless-app-browser-content"),l(n,"frameborder","0"),L(n.src,p=e[0])||l(n,"src",p),l(t,"class","netless-app-browser"),l(t,"data-kind","browser")},m(i,f){C(i,t,f),u(t,s),u(s,o),u(o,a),u(s,d),u(s,r),R(r,e[1]),u(s,g),u(s,c),u(t,b),u(t,n),h||(k=[y(r,"input",e[5]),y(r,"keypress",e[6]),y(c,"click",e[4]),y(n,"load",e[3])],h=!0)},p(i,[f]){f&4&&q(a,i[2]),f&4&&w(o,"loading",i[2]==="Loading"),f&4&&w(o,"ready",i[2]==="Ready"),f&2&&r.value!==i[1]&&R(r,i[1]),f&1&&!L(n.src,p=i[0])&&l(n,"src",p)},i:v,o:v,d(i){i&&E(t),h=!1,j(k)}}}function D(e,t,s){const o=z();let{url:a="about:blank"}=t,{dummyURL:d=a}=t,r="Ready";function g(){s(2,r="Ready")}function c(){s(0,a=d),s(2,r="Loading")}function b(){d=this.value,s(1,d)}const n=p=>p.key==="Enter"&&c();return e.$$set=p=>{"url"in p&&s(0,a=p.url),"dummyURL"in p&&s(1,d=p.dummyURL)},e.$$.update=()=>{e.$$.dirty&1&&o("update",a)},[a,d,r,g,c,b,n]}class G extends S{constructor(t){super(),B(this,t,D,A,U,{url:0,dummyURL:1})}}var H=(()=>`.netless-app-browser{width:100%;height:100%;display:flex;flex-flow:column nowrap}.telebox-color-scheme-dark .netless-app-browser{color-scheme:dark}.netless-app-browser-omnibox{padding:2px 4px;display:flex;align-items:center;gap:4px}.netless-app-browser-status{width:5em;font-size:x-small;text-align:center}.netless-app-browser-status.loading{color:gray}.netless-app-browser-status.ready{color:green}.netless-app-browser-url{flex-grow:1}.netless-app-browser-go{padding:1px 12px}.netless-app-browser-content{display:block;flex-grow:1}
`)();const F={kind:"Browser",setup(e){const t=e.box;t.mountStyles(H),t.setHighlightStage(!1);const s=new G({target:t.$content,props:{url:e.storage.state.url||"about:blank"}});s.$on("update",({detail:a})=>{e.storage.setState({url:a})});const o=e.storage.addStateChangedListener(()=>{const{url:a}=e.storage.state;s.$set({url:a,dummyURL:a})});e.emitter.on("destroy",()=>{console.log("[Browser]: destroy"),o(),s.$destroy()})}};export{F as default};
